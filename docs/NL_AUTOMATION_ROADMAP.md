# 자연어 자동화 로드맵 (Phase 0 ~ Final)

## 목적
사용자가 자연어로 요청하면 시스템이 **의도 파악 → 슬롯 채움 → 플랜 생성 → 자동 실행 → 검증 → 승인**까지 일관되게 수행하는 Clawdbot 스타일 자동화를 구현한다. MVP는 **항공권/숙박, 가격비교 쇼핑, 웹폼 자동작성** 3개 기능을 확실하게 성공시키는 것을 목표로 한다.

---

## Phase 0 — 설계 확정 (1주)
### 목표
- 전체 아키텍처/모듈/API/데이터 모델 확정
- 승인 정책 및 성공 지표 정의
- MVP 3개 기능에 대한 입력/출력/성공 기준 확정

### 핵심 산출물
- 공통 파이프라인 문서(의도 → 슬롯 → 플랜 → 실행 → 검증 → 승인)
- Core 모듈 설계도 및 역할 정의
- Intent/Slot 정의(필수/선택)
- 승인 정책 룰셋(행동/위험 등급)
- 실패 유형 분류(네트워크/권한/요소 미탐지/실행 실패)

### 인터페이스 정의(초안)
- API 엔드포인트 목록 및 입력/출력 스키마
- 실행 로그 포맷(단계별) 및 요약 포맷
- DB 테이블 구조 초안 + retention 정책

### 완료 기준
- 설계 문서 승인
- MVP 3기능 슬롯 정의 확정
- 승인 정책 문서화 및 합의

### 모듈(초안)
- `intent_router.rs` — 자연어 → IntentType 분류
- `slot_filler.rs` — 필수 슬롯 정의 및 재질문
- `plan_builder.rs` — 슬롯 기반 실행 단계 생성
- `execution_controller.rs` — 단계 실행 트리거
- `verification_engine.rs` — 결과 검증
- `approval_gate.rs` — 승인 정책 적용
- `summary_generator.rs` — 요약/추천 생성

---

## Phase 1 — 코어 파이프라인 구현 (2~3주)
### 목표
- 자연어 입력 → 의도/슬롯/플랜 생성까지 자동 작동
- 최소 1개 기능(항공권)에서 실행/검증/승인까지 시범 동작

### 구현 범위
- **Intent Router**: 룰 기반 + 확장 가능한 구조
- **Slot Filler**: 필수 슬롯 체크, 부족 슬롯 재질문 생성
- **Plan Builder**: Intent별 기본 플랜 템플릿
- **Execution Controller**: 단계 실행(브라우저 자동화/OS 액션 연결)
- **Verification Engine**: 기본 결과 검증 규칙
- **Approval Gate**: 위험 행동 차단 및 승인 요청
- **Session 관리**: 실행 상태/로그/결과 저장

### 테스트/검증
- 입력 시나리오 10개 이상
- 실패 원인 분류 3종 이상 수집
- 승인 정책이 정상적으로 차단되는지 확인

### 완료 기준
- 하나의 시나리오(항공권) end-to-end 통과
- 세션 로그/요약이 대시보드에 표시됨

---

## Phase 2 — 기능 1: 항공권/숙박 자동검색 (2주)
### 목표
- Google Flights 기반 자동 검색 완성
- 필터/정렬/결과 요약
- 승인 후 링크 이동(결제는 수동)

### 기능 세부
- 날짜/도시/예산/시간대 파싱 정확도 개선
- 편도/왕복/다구간 입력 지원
- 결과 후보 3개 요약(가격/경유/시간)
- “재검색”과 “조건 변경” 자연어 처리

### 흐름
1. 자연어 → 슬롯 추출
2. Google Flights 열기
3. 출발/도착/날짜 입력
4. 필터 적용(예산/시간대/직항)
5. 결과 3개 요약
6. 승인 요청 → 상세 페이지 이동

### 완료 기준
- 5가지 시나리오(직항/경유/예산/시간대/다구간) 통과
- 실패 시 재시도 루프 동작

---

## Phase 3 — 기능 2: 가격비교 쇼핑 (2주)
### 목표
- 가격 비교 사이트 자동화
- 최저가 후보 3개 요약

### 기능 세부
- 제품명/용량/색상 등 옵션 인식
- 가격+배송+판매자 기준의 요약 템플릿
- 가격 급변/품절 시 대체 후보 제공

### 흐름
1. 제품명/조건 파싱
2. 가격비교 사이트 접속
3. 필터 적용
4. 후보 3개 요약
5. 승인 후 이동

### 완료 기준
- 5개 제품 카테고리(전자/생활/뷰티 등) 테스트 통과
- 최저가/배송/판매자 정보 누락률 감소

---

## Phase 4 — 기능 3: 웹폼 자동작성 (2~3주)
### 목표
- 폼 필드 인식 및 사용자 프로필 매핑
- 제출 전 승인

### 기능 세부
- 기본 프로필 스키마(이름/연락처/주소/생년월일) 정의
- 필드 라벨/플레이스홀더 기반 매핑
- 민감 정보(카드/주민번호 등) 자동 입력 차단

### 흐름
1. 폼 구조 탐색
2. 필드 자동 매핑
3. 입력 요약(확인 UI)
4. 승인 후 제출

### 완료 기준
- 회원가입/예약/신청 3종 폼 테스트 통과
- 민감 정보 자동 입력 금지 확인

---

## Phase 5 — UX/Front 고도화 (2주)
### 목표
- 상태 추적 UI 정교화
- 실패 원인 분류 및 재시도 UX
- 실행 로그/리포트 뷰

### UX 강화 요소
- 진행 상태 타임라인(계획/실행/검증/승인)
- 에러 리포트/원인 요약 카드
- 승인 히스토리/거절 사유 기록
- 재시도 버튼 + 조건 수정 UI

### 완료 기준
- 사용자가 실패 사유를 1분 이내 이해 가능
- 재시도/수정 플로우 2단계 이내로 완료

---

## Phase 6 — 운영 안정화 (지속)
### 목표
- 성공률 개선
- 안정적인 자동화 운영
- 피드백 기반 리파인

### 작업 항목
- 성공률/실패율 KPI 대시보드
- 사용자 피드백 루프 강화
- 자동 재시도 전략 고도화
- 에러 패턴 기반 룰 업데이트
- 성능/안정성 모니터링 지표 추가

---

## 승인 정책(공통)
- **결제/제출/계정 변경** → 무조건 승인
- **탐색/요약** → 자동 진행 가능
- **민감정보 입력** → 승인 또는 수동 입력 강제

---

## 성공 지표 (MVP)
- 자연어 입력 → 완료율 ≥ 70%
- 실패 시 재시도 성공률 ≥ 50%
- 사용자 만족도(실효성 있음) ≥ 60%

---

## MVP 3개 기능 요약
1. **항공권/숙박 자동검색**
2. **가격비교 쇼핑**
3. **웹폼 자동작성**

---

필요 시 다음 단계 문서:
- 상세 API 명세서
- UX 플로우 다이어그램
- 테스트 시나리오
